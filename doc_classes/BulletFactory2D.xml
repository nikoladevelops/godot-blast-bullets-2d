<?xml version="1.0" encoding="UTF-8" ?>
<class name="BulletFactory2D" inherits="Node2D" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="https://raw.githubusercontent.com/godotengine/godot/master/doc/class.xsd">
	<brief_description>
		The heart of the BlastBullets2D plugin. Use this node to spawn bullets.
	</brief_description>
	<description>
		The factory does all the work in spawning bullets and configuring other plugin related options.
		Keep a reference of your [b]BulletFactory2D[/b] node throughout the lifetime of your game and call the functions you need.

		For tutorials and usage examples:
		[url=https://www.youtube.com/@realnikich]YouTube Channel[/url]
		[url=https://github.com/nikoladevelops/godot-blast-bullets-2d]Official Repository Of BlastBullets2D[/url]

		[b]This plugin is completely free and open source - created by [url=https://x.com/realNikich]realNikich[/url][/b]
		Support My Work
		[url=https://ko-fi.com/realnikich]Donate On Ko-fi[/url]
		[url=https://www.patreon.com/realnikich]Donate On Patreon[/url]
	</description>
	<tutorials>
	</tutorials>
	<methods>
		<method name="debug_get_active_attachments_amount">
			<return type="int" />
			<description>
				Get the amount of active [BulletAttachment2D] nodes.
			</description>
		</method>
		<method name="debug_get_active_bullets_amount">
			<return type="int" />
			<param index="0" name="bullet_type" type="int" enum="BulletFactory2D.BulletType" />
			<description>
				Get the amount of active bullet multimeshes of a specific type.
			</description>
		</method>
		<method name="debug_get_attachments_pool_amount">
			<return type="int" />
			<description>
				Get the amount of [BulletAttachment2D] inside the object pool.
			</description>
		</method>
		<method name="debug_get_attachments_pool_info">
			<return type="Dictionary" />
			<description>
				Get the whole information about the attachment object pool. Returns a [Dictionary] containing [b]attachment_id as the KEY[/b] and [b]amount of attachments with that attachment_id as the VALUE[/b].
			</description>
		</method>
		<method name="debug_get_bullets_pool_amount">
			<return type="int" />
			<param index="0" name="bullet_type" type="int" enum="BulletFactory2D.BulletType" />
			<description>
				Get the amount of bullet multimeshes of a specific type currently in the object pool.
			</description>
		</method>
		<method name="debug_get_bullets_pool_info">
			<return type="Dictionary" />
			<param index="0" name="bullet_type" type="int" enum="BulletFactory2D.BulletType" />
			<description>
				Get the whole information about the bullet multimeshes object pool of a specific type. Returns a [Dictionary] containing [b]amount bullets in the multimesh as the KEY[/b] and the [b]amount of multimeshes that contain exactly that amount as the VALUE[/b].
			</description>
		</method>
		<method name="debug_get_total_attachments_amount">
			<return type="int" />
			<description>
				Get the total amount of [BulletAttachment2D] in the scene tree.
			</description>
		</method>
		<method name="debug_get_total_bullets_amount">
			<return type="int" />
			<param index="0" name="bullet_type" type="int" enum="BulletFactory2D.BulletType" />
			<description>
				Get the total amount of bullet multimeshes of a specific type in the scene tree.
			</description>
		</method>
		<method name="free_active_bullets">
			<return type="void" />
			<param index="0" name="amount_bullets" type="int" default="0" />
			<description>
				Frees all active bullets that are currently in the scene tree. You also have the option of freeing only the instances that each have a particular [code]amount_bullets_per_instance[/code] if you provide a value that is bigger than 0. Example: if you want to free all those multimeshes in the scene tree that each have 200 bullets each ([code]amount_bullets_per_instance=200[/code]).
			</description>
		</method>
		<method name="free_attachments_pool">
			<return type="void" />
			<param index="0" name="attachment_id" type="int" default="-1" />
			<description>
				By default completely frees the [BulletAttachment2D] object pools. You also have the option of freeing only the attachments with a particular [code]attachment_id[/code] if you provide a value that is not a negative number. Example: if you want to free all those attachments in the object pool that each have an [code]attachment_id=5[/code].
			</description>
		</method>
		<method name="free_bullets_pool">
			<return type="void" />
			<param index="0" name="bullet_type" type="int" enum="BulletFactory2D.BulletType" />
			<param index="1" name="amount_bullets_per_instance" type="int" default="0" />
			<description>
				By default completely frees an object pool of a particular bullet type. You also have the option of freeing only the instances that each have a particular [code]amount_bullets_per_instance[/code] if you provide a value that is bigger than 0. Example: if you want to free all those multimeshes in the object pool that each have 200 bullets each ([code]amount_bullets_per_instance=200[/code]).
			</description>
		</method>
		<method name="free_disabled_bullets">
			<return type="void" />
			<param index="0" name="amount_bullets" type="int" default="0" />
			<description>
				Frees all disabled bullets that are currently in the scene tree. You also have the option of freeing only the instances that each have a particular [code]amount_bullets_per_instance[/code] if you provide a value that is bigger than 0. Example: if you want to free all those multimeshes in the scene tree that each have 200 bullets each ([code]amount_bullets_per_instance=200[/code]).
			</description>
		</method>
		<method name="get_is_factory_busy" qualifiers="const">
			<return type="bool" />
			<description>
				Sometimes the [b]BulletFactory2D[/b] might be busy doing some important work. This property provides an easy way to check if that's true.
			</description>
		</method>
		<method name="get_physics_space" qualifiers="const">
			<return type="RID" />
			<description>
				Get the physics world space in which the bullets interact.
			</description>
		</method>
		<method name="helper_generate_transforms_grid" qualifiers="static">
			<return type="Transform2D[]" />
			<param index="0" name="transforms_amount" type="int" />
			<param index="1" name="marker_transform" type="Transform2D" />
			<param index="2" name="rows_per_column" type="int" default="10" />
			<param index="3" name="alignment" type="int" enum="BulletFactory2D.Alignment" default="3" />
			<param index="4" name="column_offset" type="float" default="150.0" />
			<param index="5" name="row_offset" type="float" default="150.0" />
			<param index="6" name="rotate_grid_with_marker" type="bool" default="true" />
			<param index="7" name="random_local_rotation" type="bool" default="false" />
			<description>
				Generates a grid of transforms that are positioned relative to the [code]marker_transform[/code].
			</description>
		</method>
		<method name="populate_attachments_pool">
			<return type="void" />
			<param index="0" name="attachment_scene" type="PackedScene" />
			<param index="1" name="attachment_id" type="int" />
			<param index="2" name="amount_attachments" type="int" />
			<description>
				Populates the attachments object pool. Ensure that the [code]attachment_scene[/code] contains an actual [BulletAttachment2D] scene where you attach other nodes - particles or anything else you could think of.
			</description>
		</method>
		<method name="populate_bullets_pool">
			<return type="void" />
			<param index="0" name="multimesh_data" type="MultiMeshBulletsData2D" />
			<param index="1" name="amount_instances" type="int" />
			<description>
				Populates a specific [code]bullet_type[/code] object pool. The [code]amount_instances[/code] is the amount of multimeshes, while the [code]amount_bullets_per_instance[/code] determines how many bullets each multimesh instance has.
			</description>
		</method>
		<method name="reset">
			<return type="void" />
			<param index="0" name="amount_bullets" type="int" default="0" />
			<description>
				Resets the factory - free everything (object pools, spawned bullets, spawned attachments - all get deleted from memory).
				Emits the [signal reset_finished] signal when complete.
			</description>
		</method>
		<method name="set_physics_space">
			<return type="void" />
			<param index="0" name="new_physics_space" type="RID" />
			<description>
				Sets the world physics space that the bullets interact in.
			</description>
		</method>
		<method name="set_use_physics_interpolation_runtime">
			<return type="void" />
			<param index="0" name="enable" type="bool" />
			<description>
				Controls whether physics interpolation is enabled or not for all bullets controlled by the [b]BulletFactory2D[/b]. This method is supposed to be called during runtime, while the [method set_use_physics_interpolation_editor] method is supposed to be called in the editor.
			</description>
		</method>
		<method name="spawn_block_bullets">
			<return type="void" />
			<param index="0" name="spawn_data" type="BlockBulletsData2D" />
			<description>
				Spawns [BlockBullets2D] - bullets that act as a block that travels in a single direction with the same speed.
				If there is already a multimesh available in the object pool (that matches the amount of transforms provided) then it gets re-used with the new data.
				These bullets can NOT be controlled individually, but they are more efficient performance wise.
			</description>
		</method>
		<method name="spawn_controllable_directional_bullets">
			<return type="DirectionalBullets2D" />
			<param index="0" name="spawn_data" type="DirectionalBulletsData2D" />
			<param index="1" name="inherited_velocity_offset" type="Vector2" default="Vector2(0, 0)" />
			<description>
				Spawns DirectionalBullets2D that are meant to be controlled and edited.
				If there is a multimesh available in the object pool then it gets re-used with the new data.
				Use if you want homing bullets or to edit properties during runtime.

				Warning: Since object pooling is enabled by default, if you save these bullets to an array you might
				accidentally push the exact same multimesh (you end up with 2 references or more to the same exact object),
				that's why it's smart to disable auto pooling if you are storing them in arrays or other data structures - that way you can even implement your own pooling system.
			</description>
		</method>
		<method name="spawn_directional_bullets">
			<return type="void" />
			<param index="0" name="spawn_data" type="DirectionalBulletsData2D" />
			<param index="1" name="inherited_velocity_offset" type="Vector2" default="Vector2(0, 0)" />
			<description>
				Spawns [DirectionalBullets2D] - bullets that have individual directions determined by the rotation of their transforms.
				If there is already a multimesh available in the object pool (that matches the amount of transforms provided) then it gets re-used with the new data.
				To control these bullets individually, use the [method spawn_controllable_directional_bullets] function instead.
			</description>
		</method>
		<method name="teleport_shift_all_bullets">
			<return type="void" />
			<param index="0" name="shift_amount" type="Vector2" />
			<description>
				Shifts all bullets in the scene by a certain amount (only bullets spawned by this particular [b]BulletFactory2D[/b]).
			</description>
		</method>
	</methods>
	<members>
		<member name="block_bullets_debugger_color" type="Color" setter="set_block_bullets_debugger_color" getter="get_block_bullets_debugger_color" default="Color(0, 0, 2, 0.8)">
			The color for the collision shapes of all [BlockBullets2D].
		</member>
		<member name="directional_bullets_debugger_color" type="Color" setter="set_directional_bullets_debugger_color" getter="get_directional_bullets_debugger_color" default="Color(0, 0, 2, 0.8)">
			The color for the collision shapes of all [DirectionalBullets2D].
		</member>
		<member name="is_debugger_enabled" type="bool" setter="set_is_debugger_enabled" getter="get_is_debugger_enabled" default="false">
			Whether the debugger of the collision shapes is enabled or not.
		</member>
		<member name="is_factory_processing_bullets" type="bool" setter="set_is_factory_processing_bullets" getter="get_is_factory_processing_bullets" default="true">
			Use this if you want to pause processing of bullets - being able to stop bullets in place. Always use this instead of [code]set_process[/code]/[code]set_physics_process[/code].
		</member>
		<member name="use_physics_interpolation" type="bool" setter="set_use_physics_interpolation_editor" getter="get_use_physics_interpolation" default="false">
			Determines whether physics interpolation is enabled or not. The setter is for the editor only.

			Instead always use [method set_use_physics_interpolation_runtime] if you are doing changes during runtime.
		</member>
	</members>
	<signals>
		<signal name="area_entered">
			<param index="0" name="hit_target_area" type="Object" />
			<param index="1" name="multimesh_bullets_instance" type="MultiMeshBullets2D" />
			<param index="2" name="bullet_index" type="int" />
			<param index="3" name="bullets_custom_data" type="Resource" />
			<param index="4" name="bullet_global_transform" type="Transform2D" />
			<description>
				Emitted when a bullet enters a physics area.
			</description>
		</signal>
		<signal name="body_entered">
			<param index="0" name="hit_target_body" type="Object" />
			<param index="1" name="multimesh_bullets_instance" type="MultiMeshBullets2D" />
			<param index="2" name="bullet_index" type="int" />
			<param index="3" name="bullets_custom_data" type="Resource" />
			<param index="4" name="bullet_global_transform" type="Transform2D" />
			<description>
				Emited when a bullet enters a physics body.

				Note: Static bodies can be detected by the bullets, but only if you set the [MultiMeshBulletsData2D]'s [member MultiMeshBulletsData2D.monitorable] property to [code]true[/code] when spawning bullets - this is at the cost of performance of course, so it's better to stick with [Area2D] or other types of bodies for enemies/buildings etc and leave the [member MultiMeshBulletsData2D.monitorable] property to be false.
			</description>
		</signal>
		<signal name="life_time_over">
			<param index="0" name="multimesh_bullets_instance" type="MultiMeshBullets2D" />
			<param index="1" name="bullet_indexes" type="int[]" />
			<param index="2" name="bullets_custom_data" type="Resource" />
			<param index="3" name="bullets_global_transforms" type="Transform2D[]" />
			<description>
				Emitted when a bullet multimesh's lifetime is over, but only if the [MultiMeshBulletsData2D]'s [member MultiMeshBulletsData2D.is_life_time_over_signal_enabled] is set to [code]true[/code].
			</description>
		</signal>
		<signal name="reset_finished">
			<description>
				Emitted when the [method reset] method finishes.
			</description>
		</signal>
	</signals>
	<constants>
		<constant name="DIRECTIONAL_BULLETS" value="0" enum="BulletType">
		</constant>
		<constant name="BLOCK_BULLETS" value="1" enum="BulletType">
		</constant>
		<constant name="TOP_LEFT" value="0" enum="Alignment">
		</constant>
		<constant name="TOP_CENTER" value="1" enum="Alignment">
		</constant>
		<constant name="TOP_RIGHT" value="2" enum="Alignment">
		</constant>
		<constant name="CENTER_LEFT" value="3" enum="Alignment">
		</constant>
		<constant name="CENTER" value="4" enum="Alignment">
		</constant>
		<constant name="CENTER_RIGHT" value="5" enum="Alignment">
		</constant>
		<constant name="BOTTOM_LEFT" value="6" enum="Alignment">
		</constant>
		<constant name="BOTTOM_CENTER" value="7" enum="Alignment">
		</constant>
		<constant name="BOTTOM_RIGHT" value="8" enum="Alignment">
		</constant>
	</constants>
</class>
